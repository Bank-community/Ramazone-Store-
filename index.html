<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ramazone - Aapki Apni Dukaan</title>
    <link rel="apple-touch-icon" href="https://i.ibb.co/WvTg0bc5/20240813-084352.png">

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #4F46E5;
            --secondary-color: #F59E0B;
            --text-dark: #111827;
            --text-light: #6B7280;
            --bg-light: #F9FAFB;
            --bg-white: #FFFFFF;
            --border-color: #E5E7EB;
        }
        body { font-family: 'Inter', sans-serif; background-color: var(--bg-light); color: var(--text-dark); }
        .reveal { opacity: 0; transform: translateY(20px); transition: opacity 0.6s ease-out, transform 0.6s ease-out; }
        .reveal.visible { opacity: 1; transform: translateY(0); }
        .section-title { font-size: 1.5rem; font-weight: 800; text-align: center; margin-bottom: 1.5rem; letter-spacing: -0.5px; }
        @media (min-width: 768px) { .section-title { font-size: 2rem; } }
        .section-container { padding: 2rem 1rem; }
        @media (min-width: 1024px) { .section-container { padding: 3rem 2rem; max-width: 1280px; margin-left: auto; margin-right: auto; } }
        header { position: sticky; top: 0; z-index: 50; transition: background-color 0.3s, box-shadow 0.3s; }

        .slider-container { position: relative; width: 100%; margin: 0 auto; overflow: hidden; height: 80vw; max-height: 400px; background-color: #e5e7eb; }
        @media (min-width: 768px) { .slider-container { height: 45vw; max-height: 600px; border-radius: 24px; margin: 1rem auto; max-width: 1280px; } }
        .slider { display: flex; height: 100%; }
        .slider.transitioning { transition: transform 0.7s cubic-bezier(0.4, 0, 0.2, 1); }
        .slide { width: 100%; height: 100%; flex-shrink: 0; position: relative; }
        .slide video { width: 100%; height: 100%; object-fit: cover; position: absolute; top: 0; left: 0; z-index: 1; }
        .slide picture, .slide img { width: 100%; height: 100%; object-fit: cover; }
        .slide .overlay { position: absolute; inset: 0; z-index: 2; background: linear-gradient(to top, rgba(0,0,0,0.6), transparent 60%); }
        .slider-nav { position: absolute; top: 50%; transform: translateY(-50%); width: 100%; display: flex; justify-content: space-between; padding: 0 1rem; z-index: 10; }
        .slider-nav button { background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(5px); border: 1px solid rgba(255,255,255,0.2); color: white; width: 40px; height: 40px; border-radius: 50%; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; }
        .slider-nav button:hover { background: rgba(255, 255, 255, 0.3); transform: scale(1.1); }
        .slider-dots { position: absolute; bottom: 15px; left: 50%; transform: translateX(-50%); display: flex; gap: 8px; z-index: 10; }
        .slider-dots .dot { width: 10px; height: 10px; background: rgba(255, 255, 255, 0.5); border-radius: 50%; cursor: pointer; transition: all 0.3s ease; }
        .slider-dots .dot.active { background: white; transform: scale(1.3); }

        #fakeSearchInput { font-size: 1rem; padding: 14px 24px; cursor: pointer; background-color: var(--bg-white); display: flex; align-items: center; justify-content: space-between; border-radius: 50px; width: 95%; max-width: 600px; margin: -40px auto 1.5rem; position: relative; z-index: 10; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1), 0 5px 10px rgba(0,0,0,0.04); transition: transform 0.3s ease; }
        #fakeSearchInput:hover { transform: translateY(-3px); }
        .search-icon { width: 24px; height: 24px; color: var(--primary-color); }

        .videos-slider-container { display: flex; gap: 1rem; overflow-x: auto; scroll-behavior: smooth; padding: 1rem; scrollbar-width: none; -ms-overflow-style: none; scroll-snap-type: x mandatory; }
        .videos-slider-container::-webkit-scrollbar { display: none; }
        .video-card { flex: 0 0 90%; scroll-snap-align: center; cursor: pointer; background-color: var(--bg-white); border-radius: 1rem; box-shadow: 0 8px 25px rgba(0,0,0,0.07); overflow: hidden; transition: all 0.3s ease; }
        @media (min-width: 640px) { .video-card { flex-basis: 60%; } }
        @media (min-width: 1024px) { .video-card { flex-basis: calc(33.33% - 11px); } }
        .video-card:hover { transform: translateY(-8px); box-shadow: 0 12px 30px rgba(0,0,0,0.1); }
        .video-media { position: relative; padding-top: 56.25%; background-color: #e5e7eb; }
        .video-media img { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; }
        .video-play-icon { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 60px; height: 60px; background-color: rgba(255,255,255,0.2); backdrop-filter: blur(8px); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.5rem; transition: transform 0.3s; }
        .video-card:hover .video-play-icon { transform: translate(-50%, -50%) scale(1.1); }
        .video-content { padding: 1.25rem; }
        
        #video-lightbox { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.85); z-index: 1000; display: flex; align-items: center; justify-content: center; opacity: 0; pointer-events: none; transition: opacity 0.3s ease; }
        #video-lightbox.show { opacity: 1; pointer-events: auto; }
        #video-lightbox .lightbox-content { position: relative; width: 90%; max-width: 900px; aspect-ratio: 16/9; background-color: #000; }
        #video-lightbox iframe { width: 100%; height: 100%; border: none; }
        #video-lightbox .close-btn { position: absolute; top: -40px; right: 0; font-size: 2.5rem; color: white; cursor: pointer; }

        .festive-collection { padding: 2rem 0; margin: 1.5rem 0; position: relative; overflow: hidden; }
        @media (min-width: 768px) { .festive-collection { border-radius: 24px; margin: 1.5rem; padding: 3rem 1rem; } }
        .festival-headline { font-size: 2rem; font-weight: 900; text-align: center; margin-bottom: 1.5rem; text-shadow: 1px 1px 3px rgba(0,0,0,0.1); }
        @media (min-width: 768px) { .festival-headline { font-size: 2.75rem; } }
        .product-slider { display: flex; gap: 1rem; overflow-x: auto; scroll-behavior: smooth; padding: 1rem; scrollbar-width: none; -ms-overflow-style: none; }
        .product-slider::-webkit-scrollbar { display: none; }
        .product-card { background-color: var(--bg-white); border-radius: 16px; flex: 0 0 calc(50% - 10px); max-width: 200px; box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08); transition: transform 0.3s ease, box-shadow 0.3s ease; display: block; text-decoration: none; overflow: hidden; }
        @media (min-width: 640px) { .product-card { flex-basis: calc(33.33% - 12px); } }
        @media (min-width: 1024px) { .product-card { flex-basis: calc(20% - 13px); } }
        .product-card:hover { transform: translateY(-8px); box-shadow: 0 12px 30px rgba(0, 0, 0, 0.12); }
        .product-media-container { position: relative; width: 100%; padding-top: 100%; background-color: #f3f4f6; }
        .product-media-container img { position: absolute; top:0; left:0; width: 100%; height: 100%; object-fit: cover; transition: transform 0.4s ease; }
        .product-card:hover .product-media-container img { transform: scale(1.1); }
        .product-details { padding: 1rem; text-align: center; }
        .product-name { font-size: 0.9rem; font-weight: 600; margin: 0 0 0.25rem; color: var(--text-dark); }
        .product-offer { background-color: var(--primary-color); color: white; padding: 2px 10px; border-radius: 20px; font-size: 0.7rem; font-weight: 600; display: inline-block; margin-bottom: 0.5rem; }
        .product-price { display: flex; align-items: baseline; gap: 0.5rem; justify-content: center; }
        .display-price { font-weight: 700; color: var(--text-dark); font-size: 1.1rem; }
        .original-price { font-size: 0.85rem; text-decoration: line-through; color: var(--text-light); }

        @keyframes auto-flip { 0%, 15% { transform: rotateY(0deg); } 20%, 65% { transform: rotateY(180deg); } 70%, 100% { transform: rotateY(360deg); } }
        .flip-card-container { perspective: 1000px; }
        .flip-card-inner { position: relative; width: 100%; height: 100%; transition: transform 0.8s; transform-style: preserve-3d; animation: auto-flip 10s infinite ease-in-out; }
        .flip-card-front, .flip-card-back { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; -webkit-backface-visibility: hidden; border-radius: 1.5rem; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        .flip-card-back { transform: rotateY(180deg); }
        .flip-card-front img, .flip-card-back img { width: 100%; height: 100%; object-fit: cover; }

        .sponsor-card { border-radius: 24px; box-shadow: 0 8px 30px rgba(0,0,0,0.06); overflow: hidden; margin: 1.5rem; }
        .sponsor-card iframe, .sponsor-card img { width: 100%; height: auto; object-fit: cover; aspect-ratio: 16/9; }
        
        #footer { position: fixed; bottom: 1rem; left: 50%; transform: translateX(-50%); width: calc(100% - 2rem); max-width: 400px; background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2); box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15); border-radius: 50px; display: flex; justify-content: space-around; padding: 0.5rem; z-index: 100; }
        @media (min-width: 768px) { #footer { display: none; } }
        #footer a { flex: 1; display: flex; flex-direction: column; align-items: center; color: var(--text-light); padding: 0.5rem; border-radius: 50px; transition: color 0.3s, background-color 0.3s; text-decoration: none; }
        #footer a:hover, #footer a.active { color: var(--primary-color); background-color: rgba(79, 70, 229, 0.1); }
        #footer img { width: 24px; height: 24px; margin-bottom: 2px; }
        #footer span { font-size: 0.7rem; font-weight: 500; }
        
        #desktop-footer { display: none; }
        @media (min-width: 768px) { #desktop-footer { display: block; background-color: var(--bg-white); color: var(--text-light); padding: 3rem 2rem; border-top: 1px solid var(--border-color); } }
        .footer-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 2rem; }
        @media (min-width: 1024px) { .footer-grid { grid-template-columns: repeat(4, 1fr); } }
        .footer-column h3 { font-weight: 600; color: var(--text-dark); margin-bottom: 1rem; }
        .footer-column a { display: block; margin-bottom: 0.5rem; transition: color 0.3s; }
        .footer-column a:hover { color: var(--primary-color); }
        .footer-bottom { margin-top: 2rem; padding-top: 2rem; border-top: 1px solid var(--border-color); text-align: center; font-size: 0.9rem; }
        
        .social-media-links { position: fixed; bottom: 6rem; right: 1.5rem; display: flex; flex-direction: column; gap: 0.75rem; z-index: 99; transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55), opacity 0.3s ease; transform: translateY(20px) scale(0.9); opacity: 0; pointer-events: none; }
        .social-media-links.active { transform: translateY(0) scale(1); opacity: 1; pointer-events: auto; }
        .social-link { display: flex; align-items: center; justify-content: center; width: 52px; height: 52px; border-radius: 50%; color: white; box-shadow: 0 4px 14px rgba(0,0,0,0.15); transition: transform 0.3s ease; text-decoration: none; }
        .social-link:hover { transform: scale(1.1); }
        .social-link img { width: 28px; height: 28px; }
    </style>
</head>
<body class="bg-gray-100">

    <header id="page-header" class="bg-white/80 backdrop-blur-sm shadow-sm py-2">
        <div class="container mx-auto flex justify-center items-center px-4">
            <img src="https://i.ibb.co/CpBR4gjN/20250708-142020.png" alt="Ramazone Logo" style="max-height: 40px;">
        </div>
    </header>

    <main class="mb-28 md:mb-0">
        <div class="slider-container">
            <div class="slider" id="main-slider"></div>
            <div class="slider-nav">
                <button onclick="prevSlide()">❮</button>
                <button onclick="nextSlide()">❯</button>
            </div>
            <div class="slider-dots" id="slider-dots-container"></div>
        </div>
        
        <div class="flex justify-center px-4">
            <a id="search-link" href="#" target="_blank" class="w-full flex justify-center">
                <div id="fakeSearchInput">
                    <div>
                        <span style="color: var(--text-light);">Search for</span>
                        <span>&nbsp;</span>
                        <span id="categoryText" style="color: var(--text-dark); font-weight: 600;">Hello Ramazone</span>
                    </div>
                    <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" /></svg>
                </div>
            </a>
        </div>

        <div id="loading-indicator" class="text-center py-20"><p>Loading content...</p></div>
        <div id="content-wrapper" class="hidden">
            <section class="section-container bg-white reveal" id="special-category-section"></section>
            <section class="section-container reveal" id="videos-section"></section>
            <section class="section-container reveal" id="normal-category-section"></section>
            <section class="festive-collection reveal" id="festive-collection-container"></section>
            <section class="section-container reveal" id="flipcard-section"></section>
            <div class="sponsor-card reveal" id="dynamic-section-1"></div>
            <div class="bg-yellow-400 p-3 text-center my-8 shadow-md reveal" id="info-marquee-section"></div>
            <div class="sponsor-card reveal" id="sponsor-section-container"></div>
            <div class="sponsor-card reveal" id="dynamic-section-2"></div>
            <section class="section-container bg-white reveal" id="advantages-section"></section>
        </div>
    </main>

    <div id="footer">
        <a href="./index.html" class="active">
            <img src="https://www.svgrepo.com/show/521156/home-4.svg" alt="Home"><span>Home</span>
        </a>
        <a href="./products.html" id="footer-shop-link">
            <img src="https://www.svgrepo.com/show/521847/shopping-cart.svg" alt="Shop"><span>Shop</span>
        </a>
        <a href="#" id="footer-play-link" target="_blank">
            <img src="https://www.svgrepo.com/show/391122/video-play.svg" alt="Play"><span>Play</span>
        </a>
        <a href="#" id="footer-profile-link" target="_blank">
            <img src="https://www.svgrepo.com/show/491787/cashback-ui-web.svg" alt="Profile"><span>Cashback</span>
        </a>
        <a href="#" onclick="toggleSocialMedia(event)">
            <img src="https://cdn-icons-png.flaticon.com/128/2326/2326024.png" alt="Follow"><span>Follow</span>
        </a>
    </div>
    
    <div class="social-media-links" id="social-links-container"></div>

    <footer id="desktop-footer"></footer>

    <div id="video-lightbox" onclick="closeVideoLightbox()">
        <div class="lightbox-content" onclick="event.stopPropagation()">
            <span class="close-btn" onclick="closeVideoLightbox()">&times;</span>
            <iframe id="lightbox-youtube-player" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

    <script>
        async function initializeFirebase() {
            try {
                const response = await fetch('/api/firebase-config');
                if (!response.ok) throw new Error(`Config API failed: ${response.status}`);
                const firebaseConfig = await response.json();
                if (!firebaseConfig.apiKey) throw new Error("Incomplete config from API.");
                if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
                return firebase.database();
            } catch (error) {
                console.error("Fatal Error: Could not initialize Firebase.", error);
                document.getElementById('loading-indicator').innerHTML = `<div class="text-center p-8"><p class="text-red-500 font-bold">Error: Application configuration is missing.</p></div>`;
                return null;
            }
        }

        function loadHomepageData(database) {
            if (!database) return;
            const homepageRef = database.ref('ramazone/homepage');
            homepageRef.on('value', (snapshot) => {
                const data = snapshot.val();
                if (data) {
                    renderAllHomepageSections(data);
                    document.getElementById('loading-indicator').style.display = 'none';
                    document.getElementById('content-wrapper').classList.remove('hidden');
                }
            }, (error) => {
                console.error("Firebase read failed:", error.name)
                document.getElementById('loading-indicator').innerHTML = `<p class="text-red-500">Failed to load content.</p>`;
            });
        }
        
        function renderAllHomepageSections(data) {
            renderSlider(data.slider);
            renderSearch(data.search);
            renderSpecialCategories(data.specialCategories);
            renderVideosSection(data.videos);
            renderNormalCategories(data.normalCategories);
            renderFestiveCollection(data.festiveCollection);
            renderFlipCardSection(data.flipCard);
            renderDynamicSection('#dynamic-section-1', data.dynamicSection1);
            renderInfoMarquee(data.infoMarquee);
            renderSponsor(data.sponsor);
            renderDynamicSection('#dynamic-section-2', data.dynamicSection2);
            renderAdvantages(data.advantages);
            renderFooter(data.footer);
            setupScrollAnimations();
        }

        function renderFestiveCollection(collectionData) {
            const container = document.getElementById('festive-collection-container');
            if (!container || !collectionData || !collectionData.products) {
                if(container) container.style.display = 'none';
                return;
            }
            container.style.display = 'block';

            const headline = container.querySelector('.festival-headline') || document.createElement('h1');
            headline.className = 'festival-headline';
            headline.innerText = collectionData.title || 'Special Offers';
            headline.style.color = collectionData.headlineColor || 'var(--text-dark)';
            container.style.backgroundColor = collectionData.backgroundColor || 'var(--bg-light)';
            
            let slider = container.querySelector('.product-slider');
            if (!slider) {
                slider = document.createElement('div');
                slider.className = 'product-slider';
                container.appendChild(slider);
            }
            slider.innerHTML = '';

            const productsArray = Array.isArray(collectionData.products) 
                ? collectionData.products.map((p, i) => ({...p, id: i})) 
                : Object.keys(collectionData.products).map(key => ({ id: key, ...collectionData.products[key] }));

            productsArray.forEach(prod => {
                if (!prod) return;
                const mainMedia = (prod.images && prod.images[0]) || 'https://placehold.co/200x200/e2e8f0/e2e8f0?text=R';
                slider.innerHTML += `
                    <a href="./product-details.html?id=${prod.id}" class="product-card">
                        <div class="product-media-container"><img src="${mainMedia}" alt="${prod.name}"></div>
                        <div class="product-details">
                            <p class="product-name">${prod.name || ''}</p>
                            ${prod.offer ? `<span class="product-offer">${prod.offer}</span>` : ''}
                            <div class="product-price">
                                ${prod.displayPrice ? `<span class="display-price">₹${prod.displayPrice}</span>` : ''}
                                ${prod.originalPrice ? `<span class="original-price">₹${prod.originalPrice}</span>` : ''}
                            </div>
                        </div>
                    </a>`;
            });
        }
        
        // --- Other render functions and UI helpers ---
        function renderSlider(sliderData) { /* Placeholder for actual implementation */ }
        function renderSearch(d) { /* Placeholder for actual implementation */ }
        function renderSpecialCategories(c) { /* Placeholder for actual implementation */ }
        function renderNormalCategories(c) { /* Placeholder for actual implementation */ }
        function renderVideosSection(videosData) { /* Placeholder for actual implementation */ }
        function renderFlipCardSection(flipCardData) { /* Placeholder for actual implementation */ }
        function renderDynamicSection(s,d) { /* Placeholder for actual implementation */ }
        function renderInfoMarquee(t) { /* Placeholder for actual implementation */ }
        function renderSponsor(sponsorData) { /* Placeholder for actual implementation */ }
        function renderAdvantages(advantagesData) { /* Placeholder for actual implementation */ }
        function renderFooter(footerData) { /* Placeholder for actual implementation */ }
        function getYoutubeEmbedUrl(url) { /* Placeholder for actual implementation */ }
        function openVideoLightbox(url) { /* Placeholder for actual implementation */ }
        function closeVideoLightbox() { /* Placeholder for actual implementation */ }
        function toggleSocialMedia(event) { /* Placeholder for actual implementation */ }
        function setupScrollAnimations() { /* Placeholder for actual implementation */ }
        function prevSlide() { /* Placeholder for actual implementation */ }
        function nextSlide() { /* Placeholder for actual implementation */ }

        document.addEventListener('DOMContentLoaded', async () => {
            const database = await initializeFirebase();
            loadHomepageData(database);
        });
    </script>
</body>
</html>

