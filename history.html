<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ramazone - Aapki Apni Dukaan</title>
    <link rel="apple-touch-icon" href="https://i.ibb.co/WvTg0bc5/20240813-084352.png">

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #4F46E5;
            --secondary-color: #F59E0B;
            --text-dark: #111827;
            --text-light: #6B7280;
            --bg-light: #F9FAFB;
            --bg-white: #FFFFFF;
            --border-color: #E5E7EB;
        }
        body { font-family: 'Inter', sans-serif; background-color: var(--bg-light); color: var(--text-dark); }
        .reveal { opacity: 0; transform: translateY(20px); transition: opacity 0.6s ease-out, transform 0.6s ease-out; }
        .reveal.visible { opacity: 1; transform: translateY(0); }
        .section-title { font-size: 1.5rem; font-weight: 800; text-align: center; margin-bottom: 1.5rem; letter-spacing: -0.5px; }
        @media (min-width: 768px) { .section-title { font-size: 2rem; } }
        .section-container { padding: 2rem 1rem; }
        @media (min-width: 1024px) { .section-container { padding: 3rem 2rem; max-width: 1280px; margin-left: auto; margin-right: auto; } }
        header { position: sticky; top: 0; z-index: 50; transition: background-color 0.3s, box-shadow 0.3s; }
        .slider-container { position: relative; width: 100%; margin: 0 auto; overflow: hidden; height: 80vw; max-height: 400px; background-color: #e5e7eb; }
        @media (min-width: 768px) { .slider-container { height: 45vw; max-height: 600px; border-radius: 24px; margin: 1rem auto; max-width: 1280px; } }
        .slider { display: flex; height: 100%; }
        .slider.transitioning { transition: transform 0.7s cubic-bezier(0.4, 0, 0.2, 1); }
        .slide { width: 100%; height: 100%; flex-shrink: 0; position: relative; }
        .slide video { width: 100%; height: 100%; object-fit: cover; position: absolute; top: 0; left: 0; z-index: 1; }
        .slide picture, .slide img { width: 100%; height: 100%; object-fit: cover; }
        .slide .overlay { position: absolute; inset: 0; z-index: 2; background: linear-gradient(to top, rgba(0,0,0,0.6), transparent 60%); }
        .slider-nav { position: absolute; top: 50%; transform: translateY(-50%); width: 100%; display: flex; justify-content: space-between; padding: 0 1rem; z-index: 10; }
        .slider-nav button { background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(5px); border: 1px solid rgba(255,255,255,0.2); color: white; width: 40px; height: 40px; border-radius: 50%; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; }
        .slider-nav button:hover { background: rgba(255, 255, 255, 0.3); transform: scale(1.1); }
        .slider-dots { position: absolute; bottom: 15px; left: 50%; transform: translateX(-50%); display: flex; gap: 8px; z-index: 10; }
        .slider-dots .dot { width: 10px; height: 10px; background: rgba(255, 255, 255, 0.5); border-radius: 50%; cursor: pointer; transition: all 0.3s ease; }
        .slider-dots .dot.active { background: white; transform: scale(1.3); }
        #fakeSearchInput { font-size: 1rem; padding: 14px 24px; cursor: pointer; background-color: var(--bg-white); display: flex; align-items: center; justify-content: space-between; border-radius: 50px; width: 95%; max-width: 600px; margin: -40px auto 1.5rem; position: relative; z-index: 10; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1), 0 5px 10px rgba(0,0,0,0.04); transition: transform 0.3s ease; }
        #fakeSearchInput:hover { transform: translateY(-3px); }
        .search-icon { width: 24px; height: 24px; color: var(--primary-color); }
        .videos-slider-container { display: flex; gap: 1rem; overflow-x: auto; scroll-behavior: smooth; padding: 1rem; scrollbar-width: none; -ms-overflow-style: none; scroll-snap-type: x mandatory; }
        .videos-slider-container::-webkit-scrollbar { display: none; }
        .video-card { flex: 0 0 90%; scroll-snap-align: center; }
        @media (min-width: 640px) { .video-card { flex-basis: 60%; } }
        @media (min-width: 1024px) { .video-card { flex-basis: calc(33.33% - 11px); } }
        .video-card { cursor: pointer; background-color: var(--bg-white); border-radius: 1rem; box-shadow: 0 8px 25px rgba(0,0,0,0.07); overflow: hidden; transition: all 0.3s ease; }
        .video-card:hover { transform: translateY(-8px); box-shadow: 0 12px 30px rgba(0,0,0,0.1); }
        .video-media { position: relative; padding-top: 56.25%; background-color: #e5e7eb; }
        .video-media img { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; }
        .video-play-icon { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 60px; height: 60px; background-color: rgba(255,255,255,0.2); backdrop-filter: blur(8px); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.5rem; transition: transform 0.3s; }
        .video-card:hover .video-play-icon { transform: translate(-50%, -50%) scale(1.1); }
        .video-content { padding: 1.25rem; }
        .video-title { font-weight: 700; font-size: 1.125rem; }
        .video-description { color: var(--text-light); margin-top: 0.5rem; }
        .video-link { display: inline-block; margin-top: 1rem; color: var(--primary-color); font-weight: 600; text-decoration: none; }
        .video-link:hover { text-decoration: underline; }
        #video-lightbox { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.85); z-index: 1000; display: flex; align-items: center; justify-content: center; opacity: 0; pointer-events: none; transition: opacity 0.3s ease; }
        #video-lightbox.show { opacity: 1; pointer-events: auto; }
        #video-lightbox .lightbox-content { position: relative; width: 90%; max-width: 900px; aspect-ratio: 16/9; background-color: #000; }
        #video-lightbox iframe { width: 100%; height: 100%; border: none; }
        #video-lightbox .close-btn { position: absolute; top: -40px; right: 0; font-size: 2.5rem; color: white; cursor: pointer; }
        .festive-collection { padding: 2rem 0; margin: 1.5rem 0; position: relative; overflow: hidden; }
        @media (min-width: 768px) { .festive-collection { border-radius: 24px; margin: 1.5rem; padding: 3rem 1rem; } }
        .festival-headline { font-size: 2rem; font-weight: 900; text-align: center; margin-bottom: 1.5rem; color: var(--text-dark); text-shadow: 1px 1px 3px rgba(0,0,0,0.1); }
        @media (min-width: 768px) { .festival-headline { font-size: 2.75rem; } }
        .product-slider { display: flex; gap: 1rem; overflow-x: auto; scroll-behavior: smooth; padding: 1rem; scrollbar-width: none; -ms-overflow-style: none; }
        .product-slider::-webkit-scrollbar { display: none; }
        .product-card { background-color: var(--bg-white); border-radius: 16px; flex: 0 0 calc(50% - 10px); max-width: 200px; box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08); transition: transform 0.3s ease, box-shadow 0.3s ease; display: block; text-decoration: none; overflow: hidden; }
        @media (min-width: 640px) { .product-card { flex-basis: calc(33.33% - 12px); } }
        @media (min-width: 1024px) { .product-card { flex-basis: calc(20% - 13px); } }
        .product-card:hover { transform: translateY(-8px); box-shadow: 0 12px 30px rgba(0, 0, 0, 0.12); }
        .product-media-container { position: relative; width: 100%; padding-top: 100%; background-color: #f3f4f6; }
        .product-media-container img { position: absolute; top:0; left:0; width: 100%; height: 100%; object-fit: cover; transition: transform 0.4s ease; }
        .product-card:hover .product-media-container img { transform: scale(1.1); }
        .product-details { padding: 1rem; text-align: center; }
        .product-name { font-size: 0.9rem; font-weight: 600; margin: 0 0 0.25rem; color: var(--text-dark); }
        .product-price { display: flex; align-items: baseline; gap: 0.5rem; justify-content: center; margin-top: 0.5rem; }
        .display-price { font-weight: 700; color: var(--text-dark); font-size: 1.1rem; }
        .original-price { font-size: 0.85rem; text-decoration: line-through; color: var(--text-light); }
        .festive-offer-tag {
            position: absolute;
            bottom: 8px;
            right: 8px;
            background-color: #FBBF24; /* yellow-400 */
            color: #1F2937; /* gray-800 */
            padding: 2px 8px;
            border-radius: 6px;
            font-size: 0.7rem;
            font-weight: 700;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        @keyframes auto-flip { 0%, 15% { transform: rotateY(0deg); } 20%, 65% { transform: rotateY(180deg); } 70%, 100% { transform: rotateY(360deg); } }
        .flip-card-container { perspective: 1000px; }
        .flip-card-inner { position: relative; width: 100%; height: 100%; transition: transform 0.8s; transform-style: preserve-3d; animation: auto-flip 10s infinite ease-in-out; }
        .flip-card-front, .flip-card-back { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; -webkit-backface-visibility: hidden; border-radius: 1.5rem; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        .flip-card-back { transform: rotateY(180deg); }
        .flip-card-front img, .flip-card-back img { width: 100%; height: 100%; object-fit: cover; }
        .sponsor-card { border-radius: 24px; box-shadow: 0 8px 30px rgba(0,0,0,0.06); overflow: hidden; margin: 1.5rem; }
        .sponsor-card iframe, .sponsor-card img { width: 100%; height: auto; object-fit: cover; aspect-ratio: 16/9; }
        #footer { position: fixed; bottom: 1rem; left: 50%; transform: translateX(-50%); width: calc(100% - 2rem); max-width: 400px; background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2); box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15); border-radius: 50px; display: flex; justify-content: space-around; padding: 0.5rem; z-index: 100; }
        @media (min-width: 768px) { #footer { display: none; } }
        #footer a { flex: 1; display: flex; flex-direction: column; align-items: center; color: var(--text-light); padding: 0.5rem; border-radius: 50px; transition: color 0.3s, background-color 0.3s; text-decoration: none; }
        #footer a:hover, #footer a.active { color: var(--primary-color); background-color: rgba(79, 70, 229, 0.1); }
        #footer img { width: 24px; height: 24px; margin-bottom: 2px; }
        #footer span { font-size: 0.7rem; font-weight: 500; }
        #desktop-footer { display: none; }
        @media (min-width: 768px) { #desktop-footer { display: block; background-color: var(--bg-white); color: var(--text-light); padding: 3rem 2rem; border-top: 1px solid var(--border-color); } }
        .footer-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 2rem; }
        @media (min-width: 1024px) { .footer-grid { grid-template-columns: repeat(4, 1fr); } }
        .footer-column h3 { font-weight: 600; color: var(--text-dark); margin-bottom: 1rem; }
        .footer-column a { display: block; margin-bottom: 0.5rem; transition: color 0.3s; }
        .footer-column a:hover { color: var(--primary-color); }
        .footer-bottom { margin-top: 2rem; padding-top: 2rem; border-top: 1px solid var(--border-color); text-align: center; font-size: 0.9rem; }
        .social-media-links { position: fixed; bottom: 6rem; right: 1.5rem; display: flex; flex-direction: column; gap: 0.75rem; z-index: 99; transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55), opacity 0.3s ease; transform: translateY(20px) scale(0.9); opacity: 0; pointer-events: none; }
        .social-media-links.active { transform: translateY(0) scale(1); opacity: 1; pointer-events: auto; }
        .social-link { display: flex; align-items: center; justify-content: center; width: 52px; height: 52px; border-radius: 50%; color: white; box-shadow: 0 4px 14px rgba(0,0,0,0.15); transition: transform 0.3s ease; text-decoration: none; }
        .social-link:hover { transform: scale(1.1); }
        .social-link img { width: 28px; height: 28px; }
    </style>
</head>
<body class="bg-gray-100">

    <header id="page-header" class="bg-white/80 backdrop-blur-sm shadow-sm py-2">
        <div class="container mx-auto flex justify-center items-center px-4">
            <img src="https://i.ibb.co/CpBR4gjN/20250708-142020.png" alt="Ramazone Logo" style="max-height: 40px;">
        </div>
    </header>

    <div class="slider-container">
        <div class="slider" id="main-slider"></div>
        <div class="slider-nav">
            <button onclick="prevSlide()">❮</button>
            <button onclick="nextSlide()">❯</button>
        </div>
        <div class="slider-dots" id="slider-dots-container"></div>
    </div>
    
    <div class="flex justify-center px-4">
        <a id="search-link" href="./products.html" class="w-full flex justify-center">
            <div id="fakeSearchInput">
                <div>
                    <span style="color: var(--text-light);">Search for</span>
                    <span>&nbsp;</span>
                    <span id="categoryText" style="color: var(--text-dark); font-weight: 600;">Hello Ramazone</span>
                </div>
                <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" /></svg>
            </div>
        </a>
    </div>

    <main class="mb-28 md:mb-0">
        <section class="section-container bg-white reveal" id="special-category-section">
            <h2 class="section-title">Top Picks For You</h2>
            <div class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-4" id="special-category-wrapper"></div>
        </section>

        <section class="section-container reveal" id="videos-section">
            <h2 class="section-title">Latest Offer</h2>
            <div class="videos-slider-container" id="videos-wrapper"></div>
        </section>

        <section class="section-container reveal" id="normal-category-section">
             <h2 class="section-title">Shop by Category</h2>
            <div class="grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 lg:grid-cols-8 gap-4" id="normal-category-wrapper"></div>
        </section>

        <section class="festive-collection reveal" id="festive-collection-container">
            <h1 class="festival-headline" id="festive-headline">The Festive Collection</h1>
            <div class="product-slider" id="festive-product-slider"></div>
        </section>

        <section class="section-container reveal" id="flipcard-section">
        </section>

        <div class="sponsor-card reveal" id="dynamic-section-1"></div>
        <div class="bg-yellow-400 p-3 text-center my-8 shadow-md reveal" id="info-marquee-section">
            <p class="font-bold text-gray-800" id="info-marquee-text">Loading announcement...</p>
        </div>
        <div class="sponsor-card reveal" id="sponsor-section-container"></div>
        <div class="sponsor-card reveal" id="dynamic-section-2"></div>

        <section class="section-container bg-white reveal" id="advantages-section">
            <h2 class="section-title">Why <span style="color: var(--primary-color);">Ramazone?</span></h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-6 px-4" id="advantages-grid"></div>
        </section>
    </main>

    <div id="footer">
        <a href="./index.html" class="active">
            <img src="https://www.svgrepo.com/show/521156/home-4.svg" alt="Home"><span>Home</span>
        </a>
        <a href="./products.html" id="footer-shop-link">
            <img src="https://www.svgrepo.com/show/521847/shopping-cart.svg" alt="Shop"><span>Shop</span>
        </a>
        <a href="#" id="footer-play-link" target="_blank">
            <img src="https://www.svgrepo.com/show/391122/video-play.svg" alt="Play"><span>Play</span>
        </a>
        <a href="#" id="footer-profile-link" target="_blank">
            <img src="https://www.svgrepo.com/show/491787/cashback-ui-web.svg" alt="Profile"><span>Cashback</span>
        </a>
        <a href="#" onclick="toggleSocialMedia(event)">
            <img src="https://cdn-icons-png.flaticon.com/128/2326/2326024.png" alt="Follow"><span>Follow</span>
        </a>
    </div>
    
    <div class="social-media-links" id="social-links-container"></div>

    <footer id="desktop-footer">
        <div class="container mx-auto">
            <div class="footer-grid">
                <div class="footer-column">
                    <img src="https://i.ibb.co/CpBR4gjN/20250708-142020.png" alt="Ramazone Logo" class="h-10 mb-4">
                    <p>India's favorite online shopping destination.</p>
                </div>
                <div class="footer-column"><h3>Quick Links</h3><a href="#">About Us</a><a href="#">Contact Us</a></div>
                <div class="footer-column"><h3>Help</h3><a href="#">Payments</a><a href="#">Shipping</a><a href="#">FAQ</a></div>
                <div class="footer-column"><h3>Follow Us</h3><div id="desktop-social-links" class="flex gap-4"></div></div>
            </div>
            <div class="footer-bottom">&copy; <span id="copyright-year">2025</span> Ramazone. All Rights Reserved.</div>
        </div>
    </footer>

    <div id="video-lightbox" onclick="closeVideoLightbox()">
        <div class="lightbox-content" onclick="event.stopPropagation()">
            <span class="close-btn" onclick="closeVideoLightbox()">&times;</span>
            <iframe id="lightbox-youtube-player" style="display:none;" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                const response = await fetch('/api/firebase-config');
                if (!response.ok) throw new Error('Network response was not ok');
                const firebaseConfig = await response.json();
                
                if (!firebase.apps.length) {
                    firebase.initializeApp(firebaseConfig);
                }
                const database = firebase.database();
                loadDataFromFirebase(database);
            } catch (error) {
                console.error("Firebase initialization failed:", error);
                document.body.innerHTML = '<div style="text-align: center; padding: 50px;">Could not load page data.</div>';
            }
        });

        function loadDataFromFirebase(database) {
            const homepageRef = database.ref('ramazone/homepage');
            homepageRef.on('value', (snapshot) => {
                const data = snapshot.val();
                if (data) {
                    renderSlider(data.slider);
                    renderSearch(data.search);
                    renderSpecialCategories(data.specialCategories);
                    renderVideosSection(data.videos);
                    renderNormalCategories(data.normalCategories);
                    renderFestiveCollection(data.festiveCollection);
                    renderFlipCardSection(data.flipCard);
                    renderDynamicSection('#dynamic-section-1', data.dynamicSection1);
                    renderInfoMarquee(data.infoMarquee);
                    renderSponsor(data.sponsor);
                    renderDynamicSection('#dynamic-section-2', data.dynamicSection2);
                    renderAdvantages(data.advantages);
                    renderFooter(data.footer);
                    document.getElementById('copyright-year').textContent = new Date().getFullYear();
                }
            }, (error) => {
                 console.error("Firebase read failed: " + error.name);
            });
            setupScrollAnimations();
        }
        
        function renderFestiveCollection(collectionData) {
            const container = document.getElementById('festive-collection-container');
            if (!container || !collectionData || !collectionData.products) return;
            
            const headline = document.getElementById('festive-headline');
            headline.innerText = collectionData.title || 'Special Offers';
            if (collectionData.headlineColor) {
                headline.style.color = collectionData.headlineColor;
            }
            
            container.style.backgroundColor = collectionData.backgroundColor || 'var(--bg-light)';
            
            const slider = document.getElementById('festive-product-slider');
            slider.innerHTML = '';
            
            const productsData = collectionData.products;
            const productList = Array.isArray(productsData)
                ? productsData.map((p, i) => ({ ...p, id: i }))
                : Object.keys(productsData).map(key => ({ id: key, ...productsData[key] }));

            productList.forEach(prod => {
                if (!prod) return;
                const mainMedia = (prod.images && prod.images[0]) || '';
                slider.innerHTML += `
                    <a href="./product-details.html?id=${prod.id}" class="product-card">
                        <div class="product-media-container">
                            <img src="${mainMedia}" alt="${prod.name}">
                            ${prod.offer ? `<span class="festive-offer-tag">${prod.offer}</span>` : ''}
                        </div>
                        <div class="product-details">
                            <p class="product-name">${prod.name || ''}</p>
                            <div class="product-price">
                                ${prod.displayPrice ? `<span class="display-price">₹${prod.displayPrice}</span>` : ''}
                                ${prod.originalPrice ? `<span class="original-price">₹${prod.originalPrice}</span>` : ''}
                            </div>
                        </div>
                    </a>`;
            });
        }
        
        function renderFooter(footerData) {
            if (!footerData) return;
            document.getElementById('footer-shop-link').href = './products.html';
            document.getElementById('footer-play-link').href = footerData.playLink || '#';
            document.getElementById('footer-profile-link').href = footerData.profileLink || '#';

            const followLinks = footerData.followLinks;
            if (followLinks && typeof followLinks === 'object') {
                const mobileLinksContainer = document.getElementById('social-links-container');
                const desktopLinksContainer = document.getElementById('desktop-social-links');
                
                mobileLinksContainer.innerHTML = '';
                desktopLinksContainer.innerHTML = '';

                const socialPlatforms = {
                    youtube: { icon: 'https://www.svgrepo.com/show/448261/youtube.svg', color: '#FF0000' },
                    instagram: { icon: 'https://www.svgrepo.com/show/452229/instagram-1.svg', color: '#E4405F' },
                    facebook: { icon: 'https://www.svgrepo.com/show/448224/facebook.svg', color: '#1877F2' },
                    whatsapp: { icon: 'https://www.svgrepo.com/show/452133/whatsapp.svg', color: '#25D366' }
                };

                Object.keys(socialPlatforms).forEach(key => {
                    const platform = socialPlatforms[key];
                    const url = followLinks[key];
                    if (url) {
                        const mobileLinkHtml = `
                            <a href="${url}" target="_blank" class="social-link" style="background-color: ${platform.color};" title="${key.charAt(0).toUpperCase() + key.slice(1)}">
                                <img src="${platform.icon}" alt="${key}">
                            </a>`;
                        mobileLinksContainer.innerHTML += mobileLinkHtml;

                        const desktopLinkHtml = `
                            <a href="${url}" target="_blank" class="text-gray-500 hover:text-indigo-600 transition-colors" title="${key.charAt(0).toUpperCase() + key.slice(1)}">
                                <img src="${platform.icon}" class="w-7 h-7" alt="${key}">
                            </a>`;
                        desktopLinksContainer.innerHTML += desktopLinkHtml;
                    }
                });
            }
        }

        function getYoutubeEmbedUrl(url) {
            let videoId = '';
            try {
                const urlObj = new URL(url);
                if (urlObj.hostname === 'youtu.be') {
                    videoId = urlObj.pathname.slice(1);
                } else {
                    videoId = urlObj.searchParams.get('v');
                }
            } catch (e) { return null; }
            return videoId ? `https://www.youtube.com/embed/${videoId}?autoplay=1&controls=1&rel=0&modestbranding=1` : null;
        }

        function openVideoLightbox(url) {
            const lightbox = document.getElementById('video-lightbox');
            const youtubePlayer = document.getElementById('lightbox-youtube-player');
            if (url.includes('youtube.com') || url.includes('youtu.be')) {
                const embedUrl = getYoutubeEmbedUrl(url);
                if (embedUrl) {
                    youtubePlayer.src = embedUrl;
                    youtubePlayer.style.display = 'block';
                    lightbox.classList.add('show');
                }
            }
        }

        function closeVideoLightbox() {
            const lightbox = document.getElementById('video-lightbox');
            const youtubePlayer = document.getElementById('lightbox-youtube-player');
            youtubePlayer.src = '';
            lightbox.classList.remove('show');
        }

        function renderSlider(sliderData) {
            const slider = document.getElementById('main-slider');
            if (!slider || !sliderData) return;
            slider.innerHTML = sliderData.map(slide => `
                <a href="${slide.linkUrl || '#'}" class="slide" target="_blank">
                    ${slide.videoUrl ? `<video src="${slide.videoUrl}" autoplay muted loop playsinline></video>` : ''}
                    <picture>
                        <source media="(min-width: 768px)" srcset="${slide.imageUrlDesktop || slide.imageUrlMobile || ''}">
                        <img src="${slide.imageUrlMobile || slide.imageUrlDesktop || ''}" alt="Promotional banner">
                    </picture>
                    <div class="overlay"></div>
                </a>
            `).join('');
            initializeSlider(sliderData.length);
        }
        function renderVideosSection(videosData) {
            const wrapper = document.getElementById('videos-wrapper');
            if (!wrapper || !videosData) return;
            wrapper.innerHTML = videosData.map(item => `
                <div class="video-card" onclick="openVideoLightbox('${item.youtubeUrl}')">
                    <div class="video-media">
                        <img src="${item.imageUrl || ''}" alt="${item.title || ''}">
                        ${item.youtubeUrl ? '<div class="video-play-icon"><i class="fas fa-play"></i></div>' : ''}
                    </div>
                    <div class="video-content">
                        <h3 class="video-title">${item.title || ''}</h3>
                        <p class="video-description">${item.description || ''}</p>
                        ${item.redirectUrl ? `<a href="${item.redirectUrl}" target="_blank" class="video-link" onclick="event.stopPropagation()">Learn More &rarr;</a>` : ''}
                    </div>
                </div>
            `).join('');
        }
        function renderNormalCategories(categories) {
            const wrapper = document.getElementById('normal-category-wrapper');
            if (!wrapper || !categories) return;
            wrapper.innerHTML = categories.map(cat => `
                <a href="./products.html?category=${encodeURIComponent(cat.name)}" class="text-center group">
                    <div class="aspect-square bg-gray-200 rounded-full overflow-hidden transition-transform duration-300 group-hover:scale-110">
                        <img src="${cat.imageUrl}" alt="${cat.name}" class="w-full h-full object-cover">
                    </div>
                    <p class="mt-2 text-xs font-medium text-gray-600">${cat.name}</p>
                </a>
            `).join('');
        }
        function renderFlipCardSection(flipCardData) {
            const section = document.getElementById('flipcard-section');
            if (!section || !flipCardData) return;
            section.innerHTML = `
                <div class="flip-card-container w-full md:w-1/2 mx-auto aspect-video">
                    <div class="flip-card-inner">
                        <a href="${flipCardData.front.linkUrl || '#'}" target="_blank" class="flip-card-front">
                            <img src="${flipCardData.front.imageUrl}" alt="Front of card">
                        </a>
                        <a href="${flipCardData.back.linkUrl || '#'}" target="_blank" class="flip-card-back">
                            <img src="${flipCardData.back.imageUrl}" alt="Back of card">
                        </a>
                    </div>
                </div>
            `;
        }
        function renderSponsor(sponsorData) {
            const container = document.getElementById('sponsor-section-container');
            if (!container || !sponsorData) return;
            const mediaHtml = sponsorData.videoUrl ? `<iframe src="${getYoutubeEmbedUrl(sponsorData.videoUrl)}" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>` : `<img src="${sponsorData.imageUrl}" alt="Sponsor">`;
            container.innerHTML = `<a href="${sponsorData.linkUrl || '#'}" target="_blank">${mediaHtml}</a>`;
        }
        function renderAdvantages(advantagesData) {
            const grid = document.getElementById('advantages-grid');
            if (!grid || !advantagesData) return;
            grid.innerHTML = advantagesData.map(adv => `
                <div class="bg-white p-4 rounded-xl text-center shadow-sm hover:shadow-md transition-shadow">
                    <img src="${adv.imageUrl}" alt="${adv.title}" class="w-16 h-16 mx-auto mb-2 object-contain">
                    <p class="font-semibold text-sm text-gray-800">${adv.title}</p>
                </div>
            `).join('');
        }
        function renderSearch(d) {
            if (!d) return;
            document.getElementById('search-link').href = d.redirectUrl || './products.html';
            const c = d.scrollingTexts || [];
            if (c.length > 0) {
                let i = 0;
                const e = document.getElementById("categoryText");
                if (window.ci) clearInterval(window.ci);
                window.ci = setInterval(() => { if (e) e.innerText = c[i]; i = (i + 1) % c.length }, 2000);
            }
        }
        function renderSpecialCategories(c) {
            const w = document.getElementById('special-category-wrapper');
            if (!w || !c) return;
            w.innerHTML = c.map(cat => `
                <a href="${cat.linkUrl||'#'}" target="_blank" class="text-center group">
                    <div class="aspect-square bg-white rounded-2xl shadow-md group-hover:shadow-lg transition-all duration-300 group-hover:-translate-y-1 overflow-hidden">
                        <img src="${cat.imageUrl}" alt="${cat.name}" class="w-full h-full object-cover">
                    </div>
                    <p class="mt-2 text-xs sm:text-sm font-semibold text-gray-700">${cat.name}</p>
                </a>
            `).join('');
        }
        function renderDynamicSection(s,d) {
            const c = document.querySelector(s);
            if (!c || !d || !d.imageUrl) { if (c) c.style.display = 'none'; return; }
            c.style.display = 'block';
            c.innerHTML = `
                <a href="${d.linkUrl||'#'}" target="_blank"><img src="${d.imageUrl}" alt="${d.title||'Dynamic Content'}"></a>
                <div class="p-6">
                    <h3 class="text-xl font-bold mb-2">${d.title||''}</h3>
                    <p class="text-gray-600 mb-4">${d.text||''}</p>
                    <a href="${d.linkUrl||'#'}" target="_blank" class="text-white bg-indigo-600 hover:bg-indigo-700 font-medium rounded-full text-sm px-5 py-2.5 text-center">${d.buttonText||'Discover'}</a>
                </div>
            `;
        }
        function renderInfoMarquee(t) {
            const s = document.getElementById('info-marquee-section');
            if (!t) { s.style.display = 'none'; return; }
            s.style.display = 'block';
            s.querySelector('p').innerHTML = t;
        }
        let currentSlide = 1, totalSlides = 0, sliderInterval, isTransitioning = false;
        function initializeSlider(count) {
            const slider = document.getElementById('main-slider');
            totalSlides = count;
            if (totalSlides <= 1) return;
            const firstClone = slider.children[0].cloneNode(true);
            const lastClone = slider.children[totalSlides - 1].cloneNode(true);
            slider.appendChild(firstClone);
            slider.insertBefore(lastClone, slider.children[0]);
            slider.style.transform = `translateX(-${currentSlide * 100}%)`;
            slider.addEventListener('transitionend', () => {
                isTransitioning = false;
                if (currentSlide === 0) {
                    slider.classList.remove('transitioning');
                    currentSlide = totalSlides;
                    slider.style.transform = `translateX(-${currentSlide * 100}%)`;
                }
                if (currentSlide === totalSlides + 1) {
                    slider.classList.remove('transitioning');
                    currentSlide = 1;
                    slider.style.transform = `translateX(-${currentSlide * 100}%)`;
                }
            });
            resetSliderInterval();
        }
        function moveSlide(direction) {
            if (isTransitioning) return;
            const slider = document.getElementById('main-slider');
            isTransitioning = true;
            slider.classList.add('transitioning');
            currentSlide += direction;
            slider.style.transform = `translateX(-${currentSlide * 100}%)`;
            resetSliderInterval();
        }
        function nextSlide() { moveSlide(1); }
        function prevSlide() { moveSlide(-1); }
        function resetSliderInterval() {
            clearInterval(sliderInterval);
            sliderInterval = setInterval(nextSlide, 5000);
        }
        function toggleSocialMedia(event) {
            event.preventDefault();
            document.getElementById('social-links-container').classList.toggle('active');
        }
        function setupScrollAnimations() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });
            document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
        }
    </script>
</body>
</html>

